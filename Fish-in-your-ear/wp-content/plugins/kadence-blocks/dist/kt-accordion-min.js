!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.KadenceAccordion=e()}(this,function(){"use strict";function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function t(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}function d(){return(d=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function h(t){return e(t)||n(t)||a()}function e(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function n(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var s,u,r,o,f,l,p,g,v,y,m,b;return Array.from||(Array.from=(s=Object.prototype.toString,u=function t(e){return"function"==typeof e||"[object Function]"===s.call(e)},r=function t(e){var n=Number(e);return isNaN(n)?0:0!==n&&isFinite(n)?(0<n?1:-1)*Math.floor(Math.abs(n)):n},o=Math.pow(2,53)-1,f=function t(e){var n=r(e);return Math.min(Math.max(n,0),o)},function t(e){var n=this,i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var a=1<arguments.length?arguments[1]:void 0,s;if(void 0!==a){if(!u(a))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(s=arguments[2])}for(var r=f(i.length),o=u(n)?Object(new n(r)):new Array(r),l=0,c;l<r;)c=i[l],o[l]=a?void 0===s?a(c,l):a.call(s,c,l):c,l+=1;return o.length=r,o})),l=document,p=window,v=(l.body||l.documentElement).style,(m=y="")==v.WebkitAnimation&&(y="-webkit-"),""==v.MozAnimation&&(y="-moz-"),""==v.OAnimation&&(y="-o-"),""==v.WebkitTransition&&(m="-webkit-"),""==v.MozTransition&&(m="-moz-"),""==v.OTransition&&(m="-o-"),Object.defineProperty(Object.prototype,"onCSSAnimationEnd",{value:function t(n){var e=function t(e){n(),e.target.removeEventListener(e.type,t)};return this.addEventListener("webkitAnimationEnd",e),this.addEventListener("mozAnimationEnd",e),this.addEventListener("oAnimationEnd",e),this.addEventListener("oanimationend",e),this.addEventListener("animationend",e),(""!=y||"animation"in v)&&"0s"!=getComputedStyle(this)[y+"animation-duration"]||n(),this},enumerable:!1,writable:!0}),Object.defineProperty(Object.prototype,"onCSSTransitionEnd",{value:function t(n){var e=function t(e){n(),e.target.removeEventListener(e.type,t)};return this.addEventListener("webkitTransitionEnd",e),this.addEventListener("mozTransitionEnd",e),this.addEventListener("oTransitionEnd",e),this.addEventListener("transitionend",e),this.addEventListener("transitionend",e),(""!=m||"transition"in v)&&"0s"!=getComputedStyle(this)[m+"transition-duration"]||n(),this},enumerable:!1,writable:!0}),function(){function l(t,e){var a=this;c(this,l);var n="string"==typeof t?document.querySelector(t):t;if(null!=n){var i={headerClass:".kt-blocks-accordion-header",panelClass:".kt-accordion-panel",panelInnerClass:".kt-accordion-panel-inner",hiddenClass:"kt-accordion-panel-hidden",activeClass:"kt-accordion-panel-active",get hidenClass(){return this.hiddenClass},initializedClass:"kt-accordion-initialized",get initalisedClass(){return this.initializedClass},headerDataAttr:"data-kt-accordion-header-id",openMultiplePanels:!1,openHeadersOnLoad:[],headerOpenLabel:"",headerCloseLabel:"",roles:!0};this.settings=d({},i,e),this.container=n;var s=Array.from(this.container.children),r=[];Array.from(s).forEach(function(t){Array.from(t.children).forEach(function(t){r.push(t)})});var o=r.filter(function(t){return!t.classList.contains(a.settings.panelClass.substr(1))});this.headers=o.reduce(function(t,e){var n,i=Array.from(e.children).filter(function(t){return t.classList.contains(a.settings.headerClass.substr(1))});return t=(n=[]).concat.apply(n,h(t).concat([i]))},[]),this.panels=r.filter(function(t){return t.classList.contains(a.settings.panelClass.substr(1))}),this.toggleEl=void 0!==this.settings.toggleEl?Array.from(this.container.querySelectorAll(this.settings.toggleEl)):this.headers,this.states=[].map.call(this.headers,function(){return{state:"closed"}}),this.ids=[].map.call(this.headers,function(){return{id:Math.floor(1e6*Math.random()+1)}}),this.toggling=!1,this.container?this.init():console.log("Something is wrong with you markup...")}}return t(l,[{key:"init",value:function t(){this._setupAttributes(),this._initalState(),this.calculateAllPanelsHeight(),this._insertDataAttrs(),this._addListeners(),this._finishInitialization()}},{key:"_setRole",value:function t(e,n){("boolean"==typeof this.settings.roles&&this.settings.roles||void 0!==this.settings.roles[e]&&!1!==this.settings.roles[e])&&n.setAttribute("role",e)}},{key:"_initalState",value:function t(){var e=this.settings.openHeadersOnLoad;e.length&&this._openHeadersOnLoad(e),this._renderDom()}},{key:"_insertDataAttrs",value:function t(){var n=this;this.headers.forEach(function(t,e){t.setAttribute(n.settings.headerDataAttr,e)})}},{key:"_finishInitialization",value:function t(){this.container.classList.add(this.settings.initializedClass),this._setRole("presentation",this.container)}},{key:"_addListeners",value:function t(){var n=this;this.headers.forEach(function(t,e){t.addEventListener("click",function(){n.handleClick(t,e)})})}},{key:"handleClick",value:function t(e,n){var i=this.settings.headerClass.substr(1);e.classList.contains(i)&&!1===this.toggling&&(this.toggling=!0,this.setState(n),this._renderDom())}},{key:"setState",value:function t(i){var a=this,e=this.getState();this.settings.openMultiplePanels||e.filter(function(t,e){e!=i&&(t.state="closed")}),e.filter(function(t,e){if(e==i){var n=a.toggleState(t.state);return t.state=n}})}},{key:"_renderDom",value:function t(){var n=this;this.states.filter(function(t,e){"open"===t.state&&n.open(e,!1)}),this.states.filter(function(t,e){"closed"===t.state&&n.close(e,!1)})}},{key:"open",value:function t(e){var n;(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&this.setState(e),this.togglePanel("open",e)}},{key:"close",value:function t(e){var n;(!(1<arguments.length&&void 0!==arguments[1])||arguments[1])&&this.setState(e),this.togglePanel("closed",e)}},{key:"openAll",value:function t(){var n=this;this.headers.forEach(function(t,e){n.togglePanel("open",e)})}},{key:"closeAll",value:function t(){var n=this;this.headers.forEach(function(t,e){n.togglePanel("closed",e)})}},{key:"togglePanel",value:function t(e,n){var i=this;if(void 0!==e&&void 0!==n)if("closed"===e){var a=this.headers[n],s=this.panels[n];if(!s.classList.contains(this.settings.hiddenClass)){s.style.height=s.getAttribute("data-panel-height"),s.offsetHeight,s.style.height="",s.classList.add("kt-panel-is-collapsing"),s.classList.remove(this.settings.activeClass),a.classList.remove(this.settings.activeClass),a.setAttribute("aria-expanded",!1);var r=1e3*parseFloat(getComputedStyle(s).transitionDuration);setTimeout(function(){return s.classList.add(i.settings.hiddenClass),s.classList.remove("kt-panel-is-collapsing"),i.toggling=!1},r)}}else if("open"===e){var o=this.headers[n],l=this.panels[n];if(!l.classList.contains(this.settings.activeClass)){l.classList.remove(this.settings.hiddenClass),l.style.height=0,l.offsetHeight,l.classList.add("kt-panel-is-expanding"),l.style.height=l.getAttribute("data-panel-height"),l.offsetHeight,o.classList.add(this.settings.activeClass),o.setAttribute("aria-expanded",!0);var c=1e3*parseFloat(getComputedStyle(l).transitionDuration);setTimeout(function(){return l.classList.add(i.settings.activeClass),l.style.height="",l.classList.remove("kt-panel-is-expanding"),i.toggling=!1},c)}}}},{key:"getState",value:function t(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i;return n.length&&Array.isArray(n)?n.map(function(t){return e.states[t]}):this.states}},{key:"toggleState",value:function t(e){if(void 0!==e)return"closed"===e?"open":"closed"}},{key:"_openHeadersOnLoad",value:function t(){var e=this,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i;n.length&&Array.isArray(n)&&n.filter(function(t){return null!=t}).forEach(function(t){e.setState(t)})}},{key:"_setupAttributes",value:function t(){this._setupHeaders(),this._setupPanels(),this._insertDataAttrs()}},{key:"_setPanelHeight",value:function t(){this.calculateAllPanelsHeight()}},{key:"calculatePanelHeight",value:function t(e){var n,i=e.querySelector(this.settings.panelInnerClass).getBoundingClientRect();return e.setAttribute("data-panel-height","".concat(i.height,"px"))}},{key:"calculateAllPanelsHeight",value:function t(){var e=this;this.panels.forEach(function(t){e.calculatePanelHeight(t)})}},{key:"_setupHeaders",value:function t(){var n=this;this.headers.forEach(function(t,e){t.setAttribute("id","kt-accordion-header-".concat(n.ids[e].id)),t.setAttribute("aria-controls","kt-accordion-panel-".concat(n.ids[e].id))})}},{key:"_setupPanels",value:function t(){var n=this;this.panels.forEach(function(t,e){t.setAttribute("id","kt-accordion-panel-".concat(n.ids[e].id)),t.setAttribute("aria-labelledby","kt-accordion-header-".concat(n.ids[e].id)),!0!==n.settings.roles&&!1===n.settings.roles.region||n._setRole("region",t)})}}]),l}()});for(var accordions=document.querySelectorAll(".kt-accordion-inner-wrap"),accordionsArray=Array.from(accordions),i=0,len=accordionsArray.length;i<len;i++){var multiplePanels=accordionsArray[i].getAttribute("data-allow-multiple-open"),openPanels=accordionsArray[i].getAttribute("data-start-open"),openPanel=parseInt(openPanels);if("none"!==openPanels)for(var b=0,lenb=accordionsArray[i].children.length;b<lenb;b++)accordionsArray[i].children[b].classList.contains("kt-accordion-pane-"+(1+openPanel))&&(openPanel=b);new KadenceAccordion(accordionsArray[i],{openHeadersOnLoad:"none"===openPanels?[]:[parseInt(openPanel)],headerClass:".kt-blocks-accordion-header",panelClass:".kt-accordion-panel",panelInnerClass:".kt-accordion-panel-inner",hiddenClass:"kt-accordion-panel-hidden",activeClass:"kt-accordion-panel-active",initializedClass:"kt-accordion-initialized",headerDataAttr:"data-kt-accordion-header-id",openMultiplePanels:"true"===multiplePanels})}